<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 12px;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, var(--tg-theme-button-color, #3390ec) 0%, #8b5cf6 100%);
            color: white;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            text-align: center;
        }

        .header h1 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 16px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            flex: 1;
            min-width: 80px;
            padding: 8px 12px;
            text-align: center;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            background: transparent;
            border: none;
            color: var(--tg-theme-text-color, #000000);
        }

        .tab.active {
            background: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, white);
        }

        .card {
            background: var(--tg-theme-secondary-bg-color, #ffffff);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-card {
            background: var(--tg-theme-secondary-bg-color, #ffffff);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--tg-theme-button-color, #3390ec);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--tg-theme-hint-color, #999999);
        }

        .chart-container {
            position: relative;
            height: 250px;
            margin: 16px 0;
        }

        .chart-container canvas {
            max-height: 250px;
        }

        .recommendations {
            background: linear-gradient(135deg, var(--tg-theme-button-color, #3390ec), #8b5cf6);
            color: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .recommendations h3 {
            font-size: 16px;
            margin-bottom: 12px;
        }

        .recommendations ul {
            list-style: none;
            font-size: 14px;
            line-height: 1.5;
        }

        .recommendations li {
            margin-bottom: 8px;
            opacity: 0.95;
        }

        .top-post {
            background: var(--tg-theme-secondary-bg-color, #ffffff);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .post-rank {
            font-size: 20px;
            font-weight: 700;
            margin-right: 12px;
        }

        .post-type {
            background: var(--tg-theme-button-color, #3390ec);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .post-stats {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: var(--tg-theme-hint-color, #999999);
            margin-bottom: 8px;
        }

        .post-preview {
            background: var(--tg-theme-bg-color, #f8f9fa);
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.4;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .time-card {
            background: var(--tg-theme-secondary-bg-color, #ffffff);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .medal {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .time-hour {
            font-size: 18px;
            font-weight: 700;
            color: var(--tg-theme-button-color, #3390ec);
            margin-bottom: 4px;
        }

        .time-views {
            font-size: 14px;
            font-weight: 600;
            color: var(--tg-theme-text-color, #000000);
        }

        .content-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .content-table th,
        .content-table td {
            padding: 8px 4px;
            text-align: center;
            border-bottom: 1px solid var(--tg-theme-hint-color, #e0e0e0);
        }

        .content-table th {
            font-weight: 600;
            color: var(--tg-theme-hint-color, #999999);
        }

        .content-table td:first-child {
            text-align: left;
            font-weight: 500;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .haptic-feedback {
            transition: transform 0.1s;
        }

        .haptic-feedback:active {
            transform: scale(0.98);
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .time-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–Ω–∞–ª–∞</h1>
            <p>–õ–∏—Ç—è–≥–∏–Ω–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ | –§–æ—Ç–æ–≥—Ä–∞—Ñ</p>
            <p style="font-size: 11px; margin-top: 4px;">04.07.2025 - 03.08.2025</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab active haptic-feedback" onclick="switchTab(event, 'overview')">üìà –û–±–∑–æ—Ä</button>
            <button class="tab haptic-feedback" onclick="switchTab(event, 'content')">üìù –ö–æ–Ω—Ç–µ–Ω—Ç</button>
            <button class="tab haptic-feedback" onclick="switchTab(event, 'timing')">‚è∞ –í—Ä–µ–º—è</button>
            <button class="tab haptic-feedback" onclick="switchTab(event, 'posts')">üèÜ –¢–æ–ø</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">130</div>
                    <div class="stat-label">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">34</div>
                    <div class="stat-label">–ü–æ—Å—Ç–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2.1K</div>
                    <div class="stat-label">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">61.8</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –æ—Ö–≤–∞—Ç</div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">332</div>
                    <div class="stat-label">–†–µ–∞–∫—Ü–∏–∏</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">57</div>
                    <div class="stat-label">–†–µ–ø–æ—Å—Ç—ã</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">30</div>
                    <div class="stat-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">19.95%</div>
                    <div class="stat-label">–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å</div>
                </div>
            </div>

            <div class="recommendations">
                <h3>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                <ul>
                    <li>üéØ –í–∏–¥–µ–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</li>
                    <li>‚è∞ –õ—É—á—à–µ–µ –≤—Ä–µ–º—è: 17:00-18:00</li>
                    <li>üî• –û—Ç–ª–∏—á–Ω–∞—è –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å!</li>
                </ul>
            </div>
        </div>

        <!-- Content Tab -->
        <div id="content" class="tab-content">
            <div class="card">
                <h3 style="margin-bottom: 16px; font-size: 16px;">üìä –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                <div class="chart-container">
                    <canvas id="contentChart"></canvas>
                </div>
            </div>

            <div class="card">
                <h3 style="margin-bottom: 16px; font-size: 16px;">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                <table class="content-table">
                    <thead>
                        <tr>
                            <th>–¢–∏–ø</th>
                            <th>–ö–æ–ª-–≤–æ</th>
                            <th>–ü—Ä–æ—Å–º.</th>
                            <th>–°—Ä–µ–¥–Ω.</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>–§–æ—Ç–æ</td><td>9</td><td>635</td><td>70.6</td></tr>
                        <tr><td>–í–∏–¥–µ–æ</td><td>6</td><td>455</td><td>75.8</td></tr>
                        <tr><td>–§–æ—Ç–æ+—Ç–µ–∫—Å—Ç</td><td>5</td><td>368</td><td>73.6</td></tr>
                        <tr><td>–ê—É–¥–∏–æ</td><td>5</td><td>290</td><td>58.0</td></tr>
                        <tr><td>–¢–µ–∫—Å—Ç</td><td>3</td><td>148</td><td>49.3</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Timing Tab -->
        <div id="timing" class="tab-content">
            <div class="time-grid">
                <div class="time-card">
                    <div class="medal">ü•á</div>
                    <div class="time-hour">17:00</div>
                    <div class="time-views">118 –ø—Ä–æ—Å–º.</div>
                </div>
                <div class="time-card">
                    <div class="medal">ü•à</div>
                    <div class="time-hour">18:00</div>
                    <div class="time-views">80.5 –ø—Ä–æ—Å–º.</div>
                </div>
                <div class="time-card">
                    <div class="medal">ü•â</div>
                    <div class="time-hour">16:00</div>
                    <div class="time-views">78.5 –ø—Ä–æ—Å–º.</div>
                </div>
            </div>

            <div class="card">
                <h3 style="margin-bottom: 16px; font-size: 16px;">üìÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —á–∞—Å–∞–º</h3>
                <div class="chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Top Posts Tab -->
        <div id="posts" class="tab-content">
            <div class="top-post">
                <div class="post-header">
                    <span class="post-rank" style="color: #fbbf24;">1</span>
                    <span class="post-type">video</span>
                </div>
                <div class="post-stats">
                    <span>üëÄ 118</span>
                    <span>‚ù§Ô∏è 10</span>
                    <span>üì§ 3</span>
                    <span>16.07.2025</span>
                </div>
                <div class="post-preview">
                    ‚òÄÔ∏è –ß—É–≤—Å—Ç–≤—É–µ—Ç–µ, –∫–∞–∫ –ª–µ—Ç–æ –ø—Ä–æ–ª–µ—Ç–∞–µ—Ç –º–∏–º–æ? –ö–∞–∂–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª—Å—è –∏—é–Ω—å, –∞ –∑–∞ –æ–∫–Ω–æ–º —É–∂–µ —Å–µ—Ä–µ–¥...
                </div>
            </div>

            <div class="top-post">
                <div class="post-header">
                    <span class="post-rank" style="color: #9ca3af;">2</span>
                    <span class="post-type">photo</span>
                </div>
                <div class="post-stats">
                    <span>üëÄ 90</span>
                    <span>‚ù§Ô∏è 20</span>
                    <span>üì§ 1</span>
                    <span>12.07.2025</span>
                </div>
                <div class="post-preview">
                    –ö—Ä–∏–∫ –¥—É—à–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞‚Ä¶ –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –ª–µ—Ç–æ, —Å–æ–ª–Ω—Ü–µ, –∏–¥–µ–∞–ª—å–Ω–∞—è –ø–æ–≥–æ–¥–∞. –í—ã –Ω–∞–¥–µ–≤–∞–µ—Ç–µ —Ç–æ —Å–∞–º–æ–µ...
                </div>
            </div>

            <div class="top-post">
                <div class="post-header">
                    <span class="post-rank" style="color: #f97316;">3</span>
                    <span class="post-type">photo</span>
                </div>
                <div class="post-stats">
                    <span>üëÄ 88</span>
                    <span>‚ù§Ô∏è 16</span>
                    <span>üì§ 1</span>
                    <span>22.07.2025</span>
                </div>
                <div class="post-preview">
                    #–æ—Ç–∑—ã–≤
                </div>
            </div>

            <div class="top-post">
                <div class="post-header">
                    <span class="post-rank" style="color: #6b7280;">4</span>
                    <span class="post-type">photo album</span>
                </div>
                <div class="post-stats">
                    <span>üëÄ 86</span>
                    <span>‚ù§Ô∏è 16</span>
                    <span>üì§ 9</span>
                    <span>26.07.2025</span>
                </div>
                <div class="post-preview">
                    –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–∞ —Ñ–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç –Ω–µ —É—Å–ø–µ–ª–∞ —Å–¥–µ–ª–∞—Ç—å, –Ω–µ–º–Ω–æ–≥–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω —Å–Ω—è–ª–∞. –ë—É–¥–µ—Ç –ø–æ–≤–æ–¥ –ø–æ–π—Ç–∏ –µ—â–µ —Ä–∞–∑...
                </div>
            </div>

            <div class="top-post">
                <div class="post-header">
                    <span class="post-rank" style="color: #6b7280;">5</span>
                    <span class="post-type">video</span>
                </div>
                <div class="post-stats">
                    <span>üëÄ 83</span>
                    <span>‚ù§Ô∏è 15</span>
                    <span>üì§ 0</span>
                    <span>17.07.2025</span>
                </div>
                <div class="post-preview">
                    0.5x –∏–ª–∏ 3x? ü§î –î—É–º–∞–µ—Ç–µ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∏ –æ—Ç–¥–∞–ª–µ–Ω–∏–µ? –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —ç—Ç–æ —Ä–∞–±–æ—Ç–∞ —Å–æ–≤–µ—Ä—à–µ...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Telegram WebApp
        let tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Set theme colors
        document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#ffffff');
        document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#000000');
        document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color || '#3390ec');
        document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color || '#ffffff');
        document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', tg.themeParams.secondary_bg_color || '#f8f9fa');
        document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color || '#999999');

        // Charts
        let contentChart, timeChart;

        function switchTab(event, tabName) {
            // Haptic feedback
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }

            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Initialize charts when needed
            if (tabName === 'content' && !contentChart) {
                initContentChart();
            }
            if (tabName === 'timing' && !timeChart) {
                initTimeChart();
            }
        }

        function initContentChart() {
            const ctx = document.getElementById('contentChart').getContext('2d');
            contentChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['–§–æ—Ç–æ', '–í–∏–¥–µ–æ', '–§–æ—Ç–æ + —Ç–µ–∫—Å—Ç', '–ê—É–¥–∏–æ', '–¢–µ–∫—Å—Ç', '–ú–µ–¥–∏–∞'],
                    datasets: [{
                        data: [9, 6, 5, 5, 3, 3],
                        backgroundColor: [
                            '#8b5cf6',
                            '#06b6d4', 
                            '#10b981',
                            '#f59e0b',
                            '#ef4444',
                            '#ec4899'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                fontSize: 12,
                                padding: 10,
                                usePointStyle: true,
                                color: tg.themeParams.text_color || '#000000'
                            }
                        }
                    }
                }
            });
        }

        function initTimeChart() {
            const ctx = document.getElementById('timeChart').getContext('2d');
            const hours = ['3:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '21:00', '22:00', '23:00'];
            const views = [59, 166, 107, 182, 131, 529, 103, 157, 118, 161, 253, 77, 57];
            
            timeChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: hours,
                    datasets: [{
                        label: '–ü—Ä–æ—Å–º–æ—Ç—Ä—ã',
                        data: views,
                        borderColor: tg.themeParams.button_color || '#3390ec',
                        backgroundColor: (tg.themeParams.button_color || '#3390ec') + '20',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: tg.themeParams.button_color || '#3390ec',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: tg.themeParams.hint_color || '#e0e0e0'
                            },
                            ticks: {
                                color: tg.themeParams.text_color || '#000000',
                                font: {
                                    size: 11
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: tg.themeParams.text_color || '#000000',
                                font: {
                                    size: 11
                                },
                                maxRotation: 45
                            }
                        }
                    }
                }
            });
        }

        // Add haptic feedback to all clickable elements
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('haptic-feedback')) {
                if (tg.HapticFeedback) {
                    tg.HapticFeedback.impactOccurred('light');
                }
            }
        });

        // Initialize first chart if on content tab
        if (document.getElementById('overview').classList.contains('active')) {
            setTimeout(() => {
                initContentChart();
            }, 100);
        }

        // Handle theme changes
        tg.onEvent('themeChanged', function() {
            location.reload();
        });

        // Show that the app is ready
        tg.ready();
    </script>
</body>
</html>